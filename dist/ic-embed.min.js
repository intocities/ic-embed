/*!
 * ic-embed | https://github.com/intocities/ic-embed
 * Made by Into Cities | https://intocities.com
 * Released under the MIT License.
 */
(function(){"use strict";var e=function(e,n){if(!e||!e.contentWindow)throw Error("must give iframe!");n=n||{},this.options=Object.assign({iframe:e,iframeOrigin:e.src.split("/").slice(0,3).join("/")},n);var t=this;window.addEventListener("message",(function(e){(function(e){if(e!==t.options.iframeOrigin)throw new Error("Discarding incoming message; untrusted event origin.")})(e.origin),n=e.data.name,i=e.data,t.options.iframe.dispatchEvent(new window.CustomEvent(n,{detail:i}));var n,i}),0),this.params=function(){var e=t.options.iframe.src.split("#");if(1===e.length)return{};for(var n=e[1].split("&"),i={},o=0;o<n.length;o++){var r=n[o].split("="),s=decodeURIComponent(r[0]),a=decodeURIComponent(r[1]);i[s]=a}return i},this.changeScene=function(e,n,i){var o,r={name:"changeScene",sceneId:e};n&&(r.ath=parseFloat(n,10)),i&&(r.atv=parseFloat(i,10)),o=r,t.options.iframe.contentWindow.postMessage(o,t.options.iframeOrigin)}};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.ICEmbed=e):this.ICEmbed=e}).call(this);