(function(){"use strict";var e=function(e){if(!e||!e.contentWindow)throw Error("must give iframe!");this.options={iframe:e,origin:e.src.split("/").slice(0,3).join("/")};var t=this;window.addEventListener("message",function(e){(function(e){if(e!==t.options.origin)throw new Error("Discarding message; untrusted event origin.")})(e.origin),n=e.data.name,i=e.data,t.options.iframe.dispatchEvent(new window.CustomEvent(n,{detail:i}));var n,i},!1),this.params=function(){var e=t.options.iframe.src.split("#");if(1===e.length)return{};for(var n=e[1].split("&"),i={},o=0;o<n.length;o++){var r=n[o].split("="),s=decodeURIComponent(r[0]),a=decodeURIComponent(r[1]);i[s]=a}return i},this.changeScene=function(e,n,i){var o,r={name:"changeScene",sceneId:e};n&&(r.ath=parseFloat(n,10)),i&&(r.atv=parseFloat(i,10)),o=r,t.options.iframe.contentWindow.postMessage(o,t.options.origin)}};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.ICEmbed=e):this.ICEmbed=e}).call(this);