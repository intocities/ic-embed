!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).IC=e()}}((function(){var e=function(){function e(e){var t,o=this;if(!e||!(null===(t=null==e?void 0:e.contentWindow)||void 0===t?void 0:t.postMessage))throw TypeError("Parameter must be a HTMLIFrameElement!");var n={iframe:e,iframeOrigin:e.src.split("/").slice(0,3).join("/")};this.options=n,console.log("ICEmbed initialized with options",this.options),window.addEventListener("message",(function(e){o.receiveMessage(e)}),!1)}return e.prototype.assertAllowedOrigin=function(e){if(e!==this.options.iframeOrigin)throw new Error("Discarding incoming message; untrusted event origin.")},e.prototype.dispatchEvent=function(e,t){console.log("dispatchEvent",e,t),this.options.iframe.dispatchEvent(new window.CustomEvent(e,{detail:t}))},e.prototype.receiveMessage=function(e){console.log("receiveMessage",e),this.assertAllowedOrigin(e.origin),this.dispatchEvent(e.data.name,e.data)},e.prototype.postMessage=function(e){console.log("postMessage",e,this.options.iframeOrigin),this.options.iframe.contentWindow.postMessage(e,this.options.iframeOrigin)},e.prototype.params=function(){var e=this.options.iframe.src.split("#");if(1===e.length)return{};for(var t=e[1].split("&"),o={},n=0;n<t.length;n++){var i=t[n].split("="),s=decodeURIComponent(i[0]),r=decodeURIComponent(i[1]);o[s]=r}return o},e.prototype.changeScene=function(e,t,o){if("string"==typeof t)t=parseFloat(t);else if("number"!=typeof t)throw TypeError("ath must be number or string");if("string"==typeof o)o=parseFloat(o);else if("number"!=typeof o)throw TypeError("atv must be number or string");var n={name:"changeScene",sceneId:e,ath:t,atv:o};this.postMessage(n)},e}(),t={};return Object.defineProperty(t,"__esModule",{value:!0}),t.embed=void 0,t.embed=function(t){return new e(t)},t}));