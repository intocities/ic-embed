(function(){"use strict";var e=function(e){if(!e||!e.contentWindow)throw Error("must give iframe!");this.options={iframe:e,origin:e.src.split("/").slice(0,3).join("/")};var t=this;window.addEventListener("message",function(e){(function(e){if(e!==t.options.origin)throw new Error("Discarding message; untrusted event origin.")})(e.origin),n=e.data.name,o=e.data,t.options.iframe.dispatchEvent(new window.CustomEvent(n,{detail:o}));var n,o},!1),this.params=function(){for(var e=t.options.iframe.src.split("#")[1].split("&"),n={},o=0;o<e.length;o++){var i=e[o].split("="),s=decodeURIComponent(i[0]),r=decodeURIComponent(i[1]);n[s]=r}return n},this.changeScene=function(e,n,o){var i,s={name:"changeScene",sceneId:e};n&&(s.ath=parseFloat(n,10)),o&&(s.atv=parseFloat(o,10)),i=s,t.options.iframe.contentWindow.postMessage(i,t.options.origin)}};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.ICEmbed=e):this.ICEmbed=e}).call(this);